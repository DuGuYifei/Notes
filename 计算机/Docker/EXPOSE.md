# EXPOSE

在 Dockerfile 中写入这样的声明有两个好处，
一个是帮助镜像使用者理解这个镜像服务的守护端口，以方便配置映射;
另一个用处则是在运行时使用随机端口映射时，也就是 `docker run -P` 时，会自动随机映射 EXPOSE 的端口。

要将 EXPOSE 和在运行时使用 `-p <宿主端口>:<容器端口>` 区分开来。

* -p，是映射宿主端口和容器端口，换句话说，就是将容器的对应端口服务公开给外界访问，
* 而 EXPOSE 仅仅是声明容器打算使用什么端口而已，并不会自动在宿主进行端口映射。

**以前**所有容器都运行于默认桥接网络中，因此所有容器互相之间都可以直接访问，这样存在一定的安全性问题。于是有了一个 Docker 引擎参数 `--icc=false`，当指定该参数后，**容器间将默认无法互访**，除非互相间使用了 --links 参数的容器才可以互通，并且只有镜像中 EXPOSE 所声明的端口才可以被访问。这个 --icc=false 的用法，**在引入了 docker network 后已经基本不用了**，通过自定义网络可以很轻松的实现容器间的互联与隔离。

基于 EXPOSE 指令的上述限制，Dockerfile 的作者一般在包含 EXPOSE 规则时都只将其作为哪个端口提供哪个服务的提示。使用时，还要依赖于容器的操作人员进一步指定网络规则，需要配合 docker run -p PORT:EXPORT 使用，这样 EXPOSE 设置的端口号会被指定需要映射到宿主机器的端口，这时要确保宿主机器上的端口号没有被使用。如果直接指定 **docker run-p EXPORT，这样 EXPOSE 设置的端口号会被随机映射成宿主机器中的一个端口号**。不过通过 EXPOSE 命令文档化端口的方式十分有用。
————————————————
版权声明：本文为CSDN博主「飞哥亡命天涯」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/tianyi520jx/article/details/126994533