# 实时渲染管线

```
(1) 应用阶段 Application
    - 组织渲染命令、剔除、排序
    - Build draw calls, culling, sorting

(2) 顶点输入 Vertex Input
    - 读取顶点/索引缓冲
    - Fetch vertex/index buffers

(3) 顶点着色 Vertex Shader (VS)
    - 逐顶点计算、输出到裁剪空间
    - Per-vertex processing, output clip-space position

(4) 图元装配 Primitive Assembly
    - 由索引组装三角形
    - Assemble triangles from indices

(5) 背面剔除 Back-face Culling
    - 基于绕序/朝向剔除背面图元
    - Drop back-facing primitives via winding/orientation

(6) 裁剪 Clipping (in Clip Space)
    - 视锥裁剪，必要时切割三角形
    - Clip to frustum; may split triangles

(7) 透视除法 Perspective Divide
    - (x,y,z,w) → (x/w,y/w,z/w)
    - Homogeneous divide to NDC

(8) 视口映射 Viewport Transform
    - NDC → 屏幕坐标
    - NDC to screen-space

(9) 光栅化 Rasterization
    - 三角形覆盖测试，生成片元
    - Coverage test → generate fragments

(10) 片元属性插值 Interpolation
     - 重心插值 + 透视校正插值
     - Barycentric + perspective-correct interpolation

(11) 早期深度/模板测试 Early Depth/Stencil (Early-Z) [可选/条件]
     - 在执行片元着色前尽量先做深度测试
     - Try depth/stencil test before fragment shading

(12) 片元着色 Fragment/Pixel Shader (FS/PS)
     - 计算颜色、采样纹理、光照等
     - Compute color, texture sampling, lighting

(13) 深度测试/模板测试 (Late) Depth/Stencil
     - 若 Early-Z 受阻，则在此处执行
     - Depth/stencil here if early test couldn't run

(14) 混合 Blending (可选 Optional)
     - 透明/叠加：颜色合成
     - Alpha blending / compositing

(15) 写入帧缓冲 Framebuffer Write
     - 写颜色、写深度（若启用）
     - Write color/depth outputs

(16) 后处理 Post-processing
     - TAA/FXAA、色调映射、Bloom 等
     - TAA/FXAA, tone mapping, bloom, etc.

(17) 显示/呈现 Present
     - 交换缓冲显示到屏幕
     - Present swapchain to display
```