# 射线和线段或三角形的交点


## 和线段的交点

Ray d 过点 S, 线段 P1P2, 求交点 P

$$S+t\vec{d}=P_{1} + u(P_{2}-P_{1})$$

注意：u的范围是`[0,1]`，因为是线段。

求解有三种结果：
1. 无效等式，无解 -> 射线与线段平行，且无交点
2. 有一个解 -> 射线与线段相交，交点为 P
   1. 若 u < 0 或 u > 1 -> 交点不在线段上
3. x部分和y部分等式一致，有无穷多解 -> 射线与线段重合


## 和三角形的焦点

PS:某个点在某个三角上同时包含顶点和边上的点

Ray d 过点 O, 三角形的三个顶点是v1, v2, v3

$$O + t\vec{d} = v_{1} + u(v_{2}-v_{1}) + v(v_{3}-v_{1})$$

$$O + t\vec{d} = (1-u-v)v_{1} + uv_{2} + vv_{3}$$

1. 无穷多解 -> 射线在三角形平面上
2. 有一个解析
   1. $(0 \leq u,v \leq 1 \space \bigcap \space u+v \leq 1)$ -> 交点在三角形内部
   2. 否则 -> 交点在三角形外部